{% extends 'base.html.twig' %}

{% block title %}Rechercher une annonce{% endblock %}

{% block body %}

<div class="filterBloc">
        <h1 class="filterTitle">Recherche d'annonces</h1>

        {{ form_start(form) }}
            <div class="filterList">
                <div class="formColumn">
                    {{ form_label(form.espece) }}
                    {{ form_widget(form.espece) }}
                </div>
                <div class="formColumn">
                    {{ form_label(form.sexeAnimal) }}
                    {{ form_widget(form.sexeAnimal) }}
                </div>
                <div class="formColumn">
                    {{ form_label(form.nomAnimal) }}
                    {{ form_widget(form.nomAnimal) }}
                </div>
                <div class="formColumn">
                    {{ form_label(form.puce) }}
                    {{ form_widget(form.puce) }}
                </div>
                <div class="formColumn">
                    {{ form_label(form.tatoue) }}
                    {{ form_widget(form.tatoue) }}
                </div>
                <div class="formColumn">
                    {{ form_label(form.category) }}
                    {{ form_widget(form.category) }}
                </div>
                <div class="formColumn">
                    {{ form_label(form.ville) }}
                    {{ form_widget(form.ville) }}
                </div>
            </div>
            <div>
                {{ form_row(form.rechercher) }}
            </div>
        {{ form_end(form) }}
    </div>

        {% if annonces is not empty %}
            <h2 class="filterResultTitle">Résultats de la recherche :</h2>

               <div class="draft">
                    {% for annonce in annonces %}
                        <div class="annonceCard">

                            <div>
                                <div class="titleCard">
                                    {# liste des images #}
                                    {% for image in annonce.images %}
                                    <div>
                                        <img class="imgCard" src="{{ asset ('/uploads/' ~ image.name) }}" alt="Image">
                                    </div>
                                    {% endfor %}
                                    <div>
                                        <h2> 
                                            <a href="{{ path ('annonce_show', {'id': annonce.id})}}">{{ annonce.nomAnimal|upper }}</a>   
                                        </h2>
                                            {# statut de l'annonce #}
                                            {% if annonce.category == 'perdu' %}
                                                <p class="iconCard">
                                                    <i class="fa-solid fa-circle" style="color:red;"></i>
                                                    Perdu
                                                </p>
                                            {% elseif annonce.category == 'trouvé' %}
                                                <p class="iconCard">
                                                    <i class="fa-solid fa-circle" style="color:green;"></i>
                                                    Trouvé
                                                </p>
                                            {% endif %}
                                    </div>
                                </div>

                                {# nom de l'espece #}
                                {% if annonce.espece == 'chat' %}
                                    <p>
                                        <i class="fa-solid fa-cat"></i>
                                        chat
                                    </p>
                                {% elseif annonce.espece == 'chien' %}
                                    <p>
                                        <i class="fa-solid fa-dog"></i>
                                        chien
                                    </p>
                                {% endif %}
                            </div>

                            <div>
                                <h3>Propriétaire de l'annonce</h3>
                                <p>{{ annonce.prenomProprietaire }} {{ annonce.nomProprietaire|upper }}</p>
                            </div>
                            <div>
                                <h3>Adresse</h3>
                                <p>{{ annonce.adresse }}</p>
                                <p>{{ annonce.codePostal }}, {{ annonce.ville|upper }}</p>
                            </div>
                            <div>
                                <h3>informations complémentaires</h3>
                                <p>Sexe : {{ annonce.sexeAnimal }}</p>
                                <p>Âge : {{ annonce.ageAnimal }} ans</p>
                                <p>Puce : {{ annonce.puce }}</p>
                                <p>Tatoué : {{ annonce.tatoue }}</p>
                    
                            </div>
                            <div>
                                <h3>description visuel</h3>
                                <p>Taille de poil : {{ annonce.taillePoil }}</p>
                                <p>Couleur de poil : {{ annonce.couleurPoil|join(', ') }}</p>
                                <p>Dessin de poil : {{ annonce.dessinPoil }}</p>
                            </div>
                            <div>
                                <h3>Description</h3>
                                <p>{{ annonce.description }}</p>
                            </div>

                            {% if is_granted('ROLE_ADMIN') %}
                                <div>
                                    <a href="{{ path('annonce_edit', {'id':annonce.id}) }}">EDITER</a>
                                    <a href="{{ path('annonce_delete', {'id':annonce.id}) }}">SUPPRIMER</a>
                                </div>
                            {% endif %}

                        </div>
                    {% endfor %}

                    {# <div>
                        {{ knp_pagination_render(annonces) }}
                    </div> #}
                </div>

        {% else %}
            <p>il n'y a pas de resultat</p>
        {% endif %}
{% endblock %}
